sudo: reboot|update|join|part|mode|topic|kick|nick|msg|redirect|ignore|setlinelimit
repl: rs|clojure|vlang|cj|scheme|jsx|html

DOC / CMDS
===
changelog
colLimit charLimit lineLimit
reloadable config
web can be disabled
remove old events
IRC.listen filter showError
syntax errors
clean up TODO
removal of dateFns and _
IRC.sudo().node.parent.reloadEvents.call();
const dateFns = require('date-fns@1.30.1');
const _ = require('lodash');
removed channels and commandLimit
update config to explain getChannel
IRC.queryConfig
IBIP example
update help
webpack to esbuild
fewer deps


    // make preventable
    // TODO: onPrint / prevent Default
    //
    // tick|message|print|command|eval|join|part|nick|webhook|acquire ? rate nick

IBIP / fetchURL
    https://www.youtube.com/oembed?url=http://www.youtube.com/watch?v=ojCkgU5XGdg&format=json
    // add normal fetch
    // TODO: remove lodash / html-entities from deps
IRC.sudo().getStore('namespace')

/* message.event.isCommand */

clear Queue

sudo disable / enable events
IRC.sudo().node.parent.reloadVM.await();
better admin stuff

memo: more than line limit memos

add events to nibblrjr.vim
command for admin to reload VM
webhooks: have pub/pruvate keys for use - easy to embed in command (or use secret)
crypto.generateKeyPair

// SQL database

// logging to DB

// ~memo
// ~remind

// ~update should clear events vms

fetchURL
just have the flag set to turn into an event

const query = {
  all(query, ...params) {
    return db.prepare(query.join('?')).all(params)
  },
  one(query, ...params) {
    return db.prepare(query.join('?')).get(params)
  },
  run(query, ...params) {
    return db.prepare(query.join('?')).run(params)
  },
}

const daily = () => (new Date+[]).match(/\d+:\d+:\d+/) === '00:00:00';

IRC.listen('tick', () => {
    print('egg');
}, { filter: ({ channel }) => channel === '#eggchan' && daily() });

IRC.listen('tick', ({ channel }) => {
    if (channel === '#eggchan' && daily()) {
        print('egg');
    }
});
IRC.require() in events allows whitelisting stuff for others
say egg everyday in eggchan

14:07 <+cake^> I should make CuteServ autoreply with the colour of a hex value
CuteServ: question?

IRC.listen('tick', () => {
    print('the time is ' + new Date);
}, { filter: ({ channel }) => channel === '#8bitvape'});

IRC.listen('command', (event) => {
    if (command.root === 'ginger') {
        e.preventDefault();
    }
});


        // check tick events that have elapsed
        // this.tick = () => {
        //     setTimeout(this.tick, 1000);
        //     if (this.registered) {
        //         this.database.eventFns.tickElapsed()
        //             .forEach(row => {
        //                 const msgData = {
        //                     from: row.user,
        //                     to: row.target.toLowerCase(),
        //                     target: row.target.toLowerCase(),
        //                     isPM: row.user.toLowerCase() == row.target.toLowerCase(),
        //                     // text, message
        //                 };
        //                 const { ignoreEvents } = this.getChannelConfig(msgData.to);
        //                 const inChannel = !!Object.entries(this.client.chans)
        //                     .find(([key]) => key.toLowerCase() == msgData.target);

        //                 if (msgData.isPM || (!ignoreEvents && inChannel)) {
        //                     const cmdData = parent.database.commands
        //                         .get(row.callback);
        //                     if (cmdData) {
        //                         const { command, name } = cmdData;
        //                         mod.evaluate({
        //                             script: command,
        //                             msgData,
        //                             node: this,
        //                             event: row,
        //                             command: mod.parseCommand({ text: name })
        //                         });
        //                     }
        //                     this.database.eventFns.delete(row.idx);
        //                 }
        //             });
        //     }
        // };
        // setTimeout(this.tick, 5000);

            // check speak events that have elapsed

            // if (isPM || !this.getChannelConfig(to).ignoreEvents) {
            //     this.database.eventFns.speakElapsed(from)
            //         .forEach(row => {
            //             const cmdData = parent.database.commands.get(row.callback);
            //             if (cmdData) {
            //                 const { command, name } = cmdData;
            //                 mod.evaluate({
            //                     script: command,
            //                     msgData,
            //                     node: this,
            //                     event: row,
            //                     command: mod.parseCommand({ text: name })
            //                 });
            //             }
            //             this.database.eventFns.delete(row.idx);
            //         });
            // }V
// happy new year

version 4: SQL / events
    priority / make preventable
unix style params
PYTHON=$(which python2)

// events//
timeout abstraction for responding cutely to messages
SQL scoped to command, not server
poker2
botcoin
onjoin, onconnect

## = ignore everything
Promise { resolved: result }
make events more powerful, restrict how they're created -> current event API is bad
s/thing/thing hooks ~event.message (disable errors?) - fetchURL / memo / remind
trigger commands when not even at start of message
IRC.resetEvents
poker: call check bet raise (show odds)
~img
check with buck what different things we can do, s//
new store for events
19:00 <@nibblrjr> <Kirjava> add joins/parts to events spec (2 hours ago)
19:00 <@nibblrjr> <Kirjava> duck hunt (1 hour ago) quack / fire
19:00 <@nibblrjr> <Kirjava> add web API system for pushing events (7 hours ago)
19:00 <+nibblrjr> <Kirjava> add 'push event' exmaple for finn to events todo list (3 hours ago)
11:00 <+IckleFinn> The two use cases I have is: Send a Photo to TeleNibblr -> post the photo here and Send a standard nibblr command to TeleNibblr -> get back the response
https://www.youtube.com/get_video_info?video_id=dQw4w9WgXcQ

~7s - ~7 is a card
~pokemon [name] (have team, start at 0 ELO)

require('jsdom|lodash|date-fns') + 'Downloading from npm'

// TODO //
add help prop in commands for generic help
poker2: monthly reset
secretly log pms
force chart spread based on number of nodes
add sudo commands to docs, talk about modules
pastebin multiline output
~quit message
~help ${IRC.nick} is a wild ... that anyone can edit
character limit / convert to pastebin if over one line
command.deprecated
IRC.lang.{color,plural,quantity}
make repl-only a per channel config (4 hours ago)
use a proxy for the config (!)
https://8bv.jow.moe/i/9b175ef1c68e4d82049ad4dd4c909690.png
combine action / notice / print lineLimit
uno
command rate limiting
IRC.requestLines
FormData URLSearchParams { form }
arcsecond command parser
<kingchris> pls to make stock trading game. everybody starts with a budget of £1000 and choose stonks to invest into. use real stonk data for scoring. limit buying and selling to weekly idk? ok thank cool, good talk (2 hours ago)
koth game (you have HP to share around? - damnit bobby)
make reserved/silent configurable
/* IRC.ops() */
update config
module.fetchCached
updateConfig / merge getChannelConfig and .get -> expose lineLimit
IRC.runCommand -> make roll7 return something for bet7
~poll editor vim
blackjack
roulette
IRC.commandFns.delete|lock|star -> uses sudo
command.pasteTo pasteFrom
command.add
fix function + method inspect
node.updateConfig
IRC.sudo().evalAsCommand
command autocorrect
secret commands
nick/hash hash should wrap a full piece of text and nick should auto brackets and take more options
provide a message when downloading from npm
~chess
add print limit to get envinronment to limit event callback spam
_.deburr for title parser
useState/loadObject() alternative
comandFns.where();
~pipe
multiple triggers
tinyurl the url (crc32)
specify regex for command name
set request content type url bug https://arin.ga/BXMkyl
strip only starred commands for github ?
provide a toQueryString / URLSearchParams
truncate log messages (or also how nibblr saves itself to log)


// stats //
https://i.imgur.com/n0rIWIO.png
http://buffy.myrealm.co.uk/afsmg/stats/
http://www.df7cb.de/irc/pisg/pisg-month.html
https://chanstat.net/stats/rizon/%23homescreen
https://sourceforge.net/p/pisg/code/ci/master/tree/pisg/modules/Pisg/Parser/Logfile.pm#l582
https://github.com/miknight/pisg/blob/615758a8611c832b1cf730061f965362d95f415f/lang.txt
kick / death ratio
topics

join part vs activity

activity: do a multiline chart with hover over messages

user stats
URL linkers
richest
21:03 <eyeoh> what about pisg
21:03 <eyeoh> http://pisg.sourceforge.net/examples
21:04 <+nibblrjr> >> pisg - Perl IRC Statistics Generator :: Examples
21:04 <mordini> swear i thought you typoed pigs
21:05 <mordini> http://aurora.bot.free.fr/Stats/eloosmotus-FR.html
21:05 <+nibblrjr> >> #EloosMotus @ R�seau Europnet - stats par Zephir
21:05 <mordini> haven't seen a page like that in a while
21:05 <+IckleFinn> I hope you are writing this down then
21:06 <+IckleFinn> Would love a count of swearwords as well
21:06 <+IckleFinn> Most swearing person
21:08 <+IckleFinn> You are going to do the lurker club?
21:08 <+Kirjava> the what
21:08 <+IckleFinn> longest time online without message
21:17 <+IckleFinn> Kirjava: You going to make a heatmap for activity based on time?
10:56 <nibblrjr1> <Kirjava> track nick changes stats with nibblr (also maybe use it to work out nick groups (1 day ago)
swears

18:39 <&cr0sis> showed you graphically with stronger and more frequent lines who spoke to who
18:40 <&cr0sis> also how about people who use the same words, and also people who use the same words that are also unique to those people

====

~pipe e hello | rainbow
~poll event.tick
~matrix(7)1 - command parse bug
~commands.*
~print(){r}hello
http://passpigs.tripod.com/prob.html
getDOM('https://apps.timwhitlock.info/unicode/inspect?s='+encodeURIComponent('™')).then(dom => { print(dom.qs('#inspect tbody').textContent.replace(/\s+/g,' ')) }).catch(print.log);
https://github.com/4chan/4chan-API
trivia() { // http://opentdb.com/api.php?amount=10
mdn
memo.pending
ciu
https://stackoverflow.com/questions/29478751/how-to-cancel-an-emcascript6-vanilla-javascript-promise-chain

// WEB API
test command
test parse command
// dispatch message on print
// join new channels/servers
// track nick list

// UI
// subcommands / tree
only web ui can kick/part/join
// db web backup zip
database explorer
