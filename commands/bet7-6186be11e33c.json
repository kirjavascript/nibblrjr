{
    "name": "bet7",
    "command": "const player1 = store.get('bet7')\n\nif (player1 != null && player1 == IRC.message.from){\n  print(\"Nice try nerd.  No self bets.\");\n  store.set('bet7', null)\n} else if (player1 != null) {\n  const player2 = IRC.message.from\n\n  const player1Score = roll7(player1)\n  const player2Score = roll7(player2)\n  \n  let player1Total = store.get(player1)\n  if(isNaN(player1Total)){\n      player1Total = 0\n  }\n  let player2Total = store.get(player2)\n  if(isNaN(player2Total)){\n      player2Total = 0\n  }\n  \n  let winner = null\n  let loser = null\n\n  if(player1Score < player2Score){\n    winner = player1\n    loser = player2\n    store.set(winner, (parseInt(player1Total) + 7))\n    store.set(loser, (parseInt(player2Total) - 7))\n  }else if(player1Score > player2Score){\n    winner = player2\n    loser = player1\n    store.set(winner, (parseInt(player2Total) + 7))\n    store.set(loser, (parseInt(player1Total) - 7))\n  }\n  \n\n  if(winner){\n    print(\"{bo}Winner is \"+winner+\"{/}\");\n    print(\"{bo}\"+loser+\"{/} owes {bo}\"+winner+\"{/} Â£7 via paypal or ban\")\n  }else {\n    print(\"{bo}Draw{/} \"+\"{bo}\"+player1+\"{/} and {bo}\"+player2+\"{/} can keep their shit money\");\n    // store.set('Kirjava', (store.get('Kirjava')|0) + 14)\n    // store.set(player1, (parseInt(player1Total) - 7))\n    // store.set(player2, (parseInt(player2Total) - 7))\n  }\n\n  store.set('bet7', null)\n} else {\n  print(\"Type {bo}~bet7{/} to bet with \"+IRC.message.from);\n  store.set('bet7', IRC.message.from)\n}\n\nfunction roll7 (user) {\n  const roll = () => (0 | Math.random() * 6) + 1\n  const dice = Array.from({length: 7}, roll)\n  const total = dice.reduce((a, c) => a + c, 0)\n  const { from } = IRC.message\n\n  const diceRender = '{bl,gr} ' + dice.map(d => d == 1 ? '{bo}{p,gr}1{/}{bl,gr}' : d).join`-` + ' {/}'\n  print(`${diceRender} {dc}${user}{/} got {o}${total}{/}`);\n\n  return total;\n}",
    "locked": false,
    "starred": false
}