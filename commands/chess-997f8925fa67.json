{
    "event": false,
    "locked": false,
    "starred": false,
    "name": "chess",
    "command": "const { Chess } = require('@ninjapixel/chess');\n\nconst chess = new Chess();\n\n\n\nconst state = store.get('state');\nif (state) chess.loadPgn(state);\n\nif (/-clear/.test(input)) {\n    chess.clear();\n    store.set('state', chess.pgn());\n    return;\n}\n\n\nconst moves = chess.moves();\nconst move = input.trim();\n\nif (move && !moves.includes(move)) {\n    throw `invalid move ${move} use one of ${moves.join` `}`;\n}\n\nchess.move(move);\nstore.set('state', chess.pgn());\n\n\n// const board = chess.board().map((line,i) => 8-i+' |' + line.map((t)=>t?.color==='w'?t.type.toUpperCase():t?.type||'.').join`` + '|').join`\\n`;\n// print(board);\n\n\n\n\n// print('board: '+IRC.colors.link(IRC.require('module.paste')(chess.ascii())));\n\nprint(fancy(chess.ascii().split('\\n').slice(1,9).join('\\n')) + ` ${chess.turn()=='b'?'black' : 'white'}'s turn`);\n\n\n\nfunction fancy(str) {\n    const pieces = 'kqrbnpKQRBNP';\n    const ascii = '♔♕♖♗♘♙♚♛♜♝♞♟';\n    let p = 0;\n    return str.replace(new RegExp(` [${pieces}.] `,'g'), _ => (c=p++&1?'{bl,dgr}':'{bl,b}',p=p==23?0:p,p=p==8?15:p,c+' '+(ascii[pieces.indexOf(_[1])]||' ')+' {/}'));\n    // return str.replace(new RegExp(`[${pieces}]`,'g'), _ => ascii[pieces.indexOf(_)]);\n    // return str.replace(new RegExp(` [${pieces}] `,'g'), _ => (i=pieces.indexOf(_[1]),c=i>5?'w,bl':'bl,w',`{${c}} ${ascii[i]} {/}`));\n}\n// tsu | you should use unicode ♔♞ etc  "
}