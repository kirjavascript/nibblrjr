{
    "locked": true,
    "starred": false,
    "name": "emojislots",
    "command": "const _ = require('lodash');const dateFns = require('date-fns@1.30.1');const lastSpin = store.get('lastspin$' + IRC.message.from);\nIRC.require('module.count').next();\nconst now = new Date();\nconst { addMilliseconds, isBefore } = dateFns;\nif (lastSpin && isBefore(now, addMilliseconds(new Date(lastSpin), 1500))) {\n    throw new Error(IRC.message.from.toLowerCase() + ' pls wait 1.5s between spin');\n}\nstore.set('lastspin$' + IRC.message.from, now.toISOString());\n\nconst fruit = [...`😁😂😃😄😅😆😇😉😊☺️😋😌😍😘😚😜😝😎😏😶😐😒😳😞😠😡😔☹️😣😖😫😩😤😱😨😰😢😥😪😓😭😵😲😷💤💩😈👿👹👺💀👻👽😺😸😹😻😼😽🙀😿😾🙌👏👋👍👎👊✊✌👌✋👐💪🙏☝👆👇👈👉✍💅👄👅👂👃👀👤👶👦👧👨👩👱👴👵👲👳👮👷💂🎅👼👸👰🚶🏃💃👯👫🙇💁🙅🙆🙋🙎🙍💇💆💑👩‍👨‍❤️‍💏👪👧👦👕👖👔👗👙👘💄💋👣👠👡👢👞👟👒🎩🎓👑🎒👝👛👜💼👓💍🌂🐶🐱🐭🐹🐰🐻🐼🐨🐯🐮🐷🐽🐸🐙🐵🙈🙉🙊🐒🐔🐧🐦🐤🐣🐥🐺🐗🐴🐝🐛🐌🐞🐜🐍🐢🐠🐟🐡🐬🐳🐫🐘🐑🐎🐩🐾🐲🌵🎄🌴🌱🌿☘🍀🎍🎋🍃🍂🍁🌾🌺🌻🌹🌷🌼🌸💐🍄🌰🎃🐚🌏🌕🌑🌓🌔🌛🌙⭐️🌟💫✨☄☀️⛅️☁️⚡️🔥💥❄️⛄️💨☂☔️💧💦🌊🍏🍎🍊🍌🍉🍇🍓🍈🍒🍑🍍🍅🍆🌽🍠🍯🍞🍗🍖🍤🍳🍔🍟🍕🍝🍜🍲🍥🍣🍱🍛🍙🍚🍘🍢🍡🍧🍨🍦🍰🎂🍮🍬🍭🍫🍩🍪🍺🍻🍷🍸🍹🍶🍵☕ ️🍴⚽️🏀🏈⚾️🎾🎱⛳️🎿🏂🎣🏊🏄🛀🏆🎽🎫🎭🎨🎪🎤🎧🎼🎹🎷🎺🎸🎻🎬🎮👾🎯🎲🎰🎳🚗🚕🚙🚌🚓🚑🚒🚚🚲🚨🚃🚄🚅🚇🚉✈️⛵️🚤🚀💺⚓️🚧⛽️🚏🚥🏁🚢🎡🎢🎠🌁🗼🏭⛲️🎑🗻🌋🗾⛺️🌅🌄🌇🌆🌃🌉🌌🌠🎇🎆🌈🏰🏯🗽🏠🏡🏢🏬🏣🏥🏦🏨🏪🏫🏩💒⛪️⌚️📱📲💻⌨💽💾💿📀📼📷📹🎥📞☎️📟📠📺📻⌛️📡🔋🔌💡🔦💸💵💴💰💳💎⚖🔧🔨⚒🔩⚙🔫💣🔪⚔🚬☠🔮💈⚗💊💉🔖🚽🔑🚪🗿🎈🎏🎀🎁🎊🎉🎎🎐🎌🏮✉️📩📨📧💌📮💱`];\nconst bagSize = 15;\nconst wheelQty = 3;\nconst defaultJackpot = 100;\nconst cost = 1;\nconst c = '$';\n\nconst bag = _.shuffle(fruit).splice(0, bagSize);\nconst roll = () => {\n    return bag[(Math.random())*bagSize|0];\n};\n\nconst wheels = Array.from({length: wheelQty}).map(roll);\n\nlet jackpot = store.get('$jackpot');\nif (!jackpot) {\n    jackpot = defaultJackpot;\n    store.set('$jackpot', defaultJackpot)\n}\nconst jackpotStr = Intl.NumberFormat().format(+jackpot);\nconst pad = wheels.map(d => d.replace(/{(.*?)}/g,'').length).reduce((a, b) => a + b, 0) - 15 - jackpotStr.length;\nprint(`{o}[{y}SLOTSv2{/} ${pad>0?' '.repeat(pad):''}{g}Jackpot{/} {y}${c}${jackpotStr}{/}{o}]               {dgr} *slot machine sounds*{/}`);\nprint('{o}(' + wheels.join('{y}-{/}') + '{o}){y}/{r}°');\n\nconst funds = store.get(IRC.message.from) || 100;\n\nif (_.uniq(wheels).length == 1) {\n    const newScore = +funds + +jackpot\n    store.set(IRC.message.from, newScore)\n    print(`{rb} J A C K P O T !!!{/} ${IRC.message.from} has {y}${c}${Intl.NumberFormat().format(newScore)}`);\n    store.set('$jackpot', defaultJackpot);\n}\nelse {\n    const newScore = +funds - cost\n    store.set(IRC.message.from, newScore);\n    print(`${IRC.message.from} has {y}${c}${Intl.NumberFormat().format(newScore)}{/}`)\n    store.set('$jackpot', +jackpot + (cost * 2));\n}\n"
}
