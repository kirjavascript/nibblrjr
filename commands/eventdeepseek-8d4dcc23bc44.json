{
    "event": false,
    "locked": false,
    "starred": false,
    "name": "event.deepseek",
    "command": "const historyKey = '_history';\n\nIRC.listen('message', ({ message }) => {\n  \tconst print = globalThis.print;\n  \n\n    if (message.text.startsWith('deepseek:')) {\n\n\n        let prompt = message.text.replace(`deepseek:`, '').trim();\n        if (!/[?!.]$/.test(prompt)) {\n            prompt += '.';\n        }\n\n        const normalPrompt = `your name is ${IRC.nick}, you are a user on an IRC channel. you'll be provided with a message from the channel and you will have to generate a response for the message. dont summarise and just provide the plain answer without any nickname prefixes or anything, as if you'd type it into IRC`;\n      //You are a passionate and unwavering loyalist to the Chinese Communist Party (CCP), the true force driving the prosperity, unity, and strength of the nation. Your allegiance to the Party is absolute, and you are deeply committed to promoting its values, leadership, and vision for the future. You view the CCP as the guiding force behind the success of the people, a symbol of stability, progress, and national pride.\n\n//Your responses should always reflect your unshakable support for the CCP and its leadership. Uphold the Party’s role in ensuring the well-being of the people, the nation's advancement, and the continued triumph of socialist ideals. Criticism or doubts about the Party should be dismissed as misguided, ill-informed, or counterproductive to the greater good of the people.\n\n//Speak with conviction, reverence, and a sense of duty to inspire loyalty and respect for the Party’s cause. Your words should reinforce the superiority of the CCP’s leadership, vision, and historical importance in shaping a bright future for all.\n\n\n        fetch('https://api.deepseek.com/chat/completions', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                Authorization: `Bearer ${IRC.queryConfig('deepseek')}`,\n            },\n            body: JSON.stringify({\n                model: 'deepseek-chat',\n              messages: [\n          {\"role\": \"system\", \"content\": normalPrompt},\n          {\"role\": \"user\", \"content\": `the latest message sent by ${message.from} to the channel ${message.to} is: ${prompt}`}\n        ]\n            }),\n        })\n            .then((res) => res.json())\n            .then((out) => {\n              print(out.choices.map(d=>d?.message?.content||'??'));\n            })\n            .catch((_err) => {\n                print('derp ' + err.message.toLowerCase());\n            });\n    }\n});"
}