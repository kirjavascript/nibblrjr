{
    "name": "gdq",
    "command": "const { formatDistanceToNowStrict } = require(\"date-fns@2\");\n\nconst currentEvent = fetchSync\n  .json(\"https://gamesdonequick.com/tracker/api/v2/events/\")\n  .results.find(({ datetime }) => new Date(datetime) < new Date());\n\nconst eventRuns = fetchSync\n  .json(\"https://gamesdonequick.com/tracker/api/v2/runs/?offset=4000\")\n  .results.filter(({ event }) => event.id === currentEvent.id);\n\nconst currentRun = eventRuns.find(\n  ({ starttime, endtime }) => new Date(starttime) < new Date() && new Date(endtime) > new Date(),\n);\n\nconst nextRun = eventRuns[eventRuns.indexOf(currentRun) + 1];\n\nconst formatter = new Intl.ListFormat(\"en\", { style: \"long\", type: \"conjunction\" });\nconst formatRunners = runners =>\n  formatter.format(\n    runners.map(({ name, pronouns }) =>\n      IRC.colors.nick(\n        `${name}${\n          pronouns &&\n          `(${pronouns\n            .toLowerCase()\n            .split(\"/\")\n            .map(pronoun => pronoun.trim())\n            .join(\"/\")})`\n        }`,\n        false,\n      ),\n    ),\n  );\n\nconst currentStr =\n  currentRun &&\n  `Current run: ${IRC.colors.nick(`${currentRun.name}(${currentRun.console} - ${currentRun.category})`, false)}(est. ${currentRun.run_time}) by ${formatRunners(currentRun.runners)}`;\n\nconst nextStr =\n  nextRun &&\n  `In ${formatDistanceToNowStrict(\n    new Date(nextRun.starttime),\n  )}: ${IRC.colors.nick(\n    `${nextRun.name}(${nextRun.console} - ${nextRun.category})`,\n    false,\n  )}(est. ${nextRun.run_time}) by ${formatRunners(nextRun.runners)}`;\n\nprint([currentStr, nextStr].filter(Boolean).join(\". \") || \"No runs not now not ever ;-;\");\n",
    "locked": false,
    "starred": false
}