{
    "event": false,
    "locked": false,
    "starred": false,
    "name": "nhl",
    "command": "// https://gitlab.com/dword4/nhlapi/-/blob/master/new-api.md?ref_type=heads\n\ntry {\n  const [params] = IRC.command.params;\n\n  let url = 'https://api-web.nhle.com/v1/'\n\n  if (params && params === 'top') {\n    url += 'standings/now'\n    getJSON(url)\n      .then(d => {\n          print(`{bo}{gr}NHL{/} {y}Standings - Top 5{/}`)\n          for(let i = 0; i < 5; i++) {\n              current = d.standings[i]\n              print(`{p}${current.teamName.default}{/} {o}${current.teamAbbrev.default}{/} {b}Games: ${current.gamesPlayed}{/} {g}Wins: ${current.wins || '-'}{/} {c}${current.divisionName}{/} {y}Win percent: ${current.winPctg}%{/}`)\n          }\n      })\n      .catch('user error')\n  } else if (input) {\n    url += `club-schedule/${input}/week/now`\n\n    getJSON(url)\n      .then(d => {\n          for(let i = 0; i < d.games.length; i++) {\n              current = d.games[i]\n              print(`{p}${current.homeTeam.placeName.default}{/} vs {g}${current.awayTeam.placeName.default}{/} {b}${current.homeTeam.score || '-'} : ${current.awayTeam.score || '-'}{/} {c}${current.gameState}{/} {y}${(new Date(current.startTimeUTC)).toLocaleString()}{/}`)\n          }\n      })\n      .catch('user error')\n  } else {\n    url += 'schedule/now'\n\n    getJSON(url)\n      .then(d => {\n          const week = d.gameWeek[0]\n          print(`{bo}{gr}NHL{/}    {b}${week.dayAbbrev}{/}    {r}${week.date}{/}    {p}Games: ${week.numberOfGames}{/}`)\n          for(let i = 0; i < week.games.length; i++) {\n              current = week.games[i]\n              print(`{p}${current.homeTeam.placeName.default}{/} vs {g}${current.awayTeam.placeName.default}{/} {b}${current.homeTeam.score || '-'} : ${current.awayTeam.score || '-'}{/} {c}${current.gameState}{/} {y}${(new Date(current.startTimeUTC)).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}{/}`)\n          }\n      })\n      .catch('user error')\n  }\n\n} catch (e) {\n\tprint('user error') \n}"
}