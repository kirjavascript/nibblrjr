{
    "name": "pissslots",
    "command": "const _ = require('lodash');const fruit = [\n    '{y,dg} PISS ',\n].map(d => d + '{/}');\nconst bagSize = 1;\nconst wheelQty = 3;\nconst defaultJackpot = 1337;\nconst cost = 1;\nconst c = '$';\n\nconst bag = _.shuffle(fruit).splice(0, bagSize);\nconst roll = () => {\n    return bag[(Math.random())*bagSize|0];\n};\n\nconst wheels = Array.from({length: wheelQty}).map(roll);\n\nlet jackpot = store.get('$jackpot');\nif (!jackpot) {\n    jackpot = defaultJackpot;\n    store.set('$jackpot', defaultJackpot)\n}\nconst jackpotStr = Intl.NumberFormat().format(+jackpot);\nconst pad = wheels.map(d => d.replace(/{(.*?)}/g,'').length).reduce((a, b) => a + b, 0) - 15 - jackpotStr.length;\nprint(`{o}[{y}SLOTSv2{/} ${pad>0?' '.repeat(pad):''}{g}Jackpot{/} {y}${c}${jackpotStr}{/}{o}]               {dgr} *slot machine sounds*{/}`);\nprint('{o}(' + wheels.join('{y}-{/}') + '{o}){y}/{r}Â°');\n\nconst funds = store.get(IRC.message.from) || 100;\n\nif (_.uniq(wheels).length == 1) {\n    const newScore = +funds + +jackpot\n    store.set(IRC.message.from, newScore)\n    print(`{bl,gr}{rb} J A C K P O T !!!{/} ${IRC.message.from} has {y}${c}${Intl.NumberFormat().format(newScore)}`);\n    store.set('$jackpot', defaultJackpot);\n}\nelse if (wheels[0]==wheels[1] || wheels[1] == wheels[2]) {\n    const win = ((Math.random()*4)|0)+1;\n    const newScore = +funds + win;\n    store.set(IRC.message.from, newScore);\n    print(`${IRC.message.from} won {y}${c}${win}{/}! and has {y}${c}${Intl.NumberFormat().format(newScore)}{/}`);\n}\nelse {\n    const newScore = +funds - cost\n    store.set(IRC.message.from, newScore);\n    print(`${IRC.message.from} has {y}${c}${Intl.NumberFormat().format(newScore)}{/}`)\n    store.set('$jackpot', +jackpot + (cost * 2));\n}\n",
    "locked": false,
    "starred": false
}
