{
    "locked": false,
    "starred": false,
    "name": "r7rpg.revive",
    "command": "const { from } = IRC.message\n\nlet player = store.load(from)\n\nif (! player.status) {\n  throw new Error('Use ~r7rpg.register to play') \n}\n\nif (IRC.require('r7rpg.quest').inQuest()) {\n  throw new Error(`{dc}${from}{/} cannot heal. There are no hospitals here`)\n}\n\nif (IRC.require('r7rpg.dungeon').inDungeon()) {\n  throw new Error(`{dc}${from}{/} cannot heal. There are no hospitals here`)\n}\n\nif (player.status.type == 'dead') {\n  const cost = player.stats.level * 10\n  if (player.stats.money > cost) {\n    IRC.require('r7rpg.player').charge(cost)\n  } else {\n    print(`{dc}${from}{/} was revived by Obamacare`)\n  }\n  IRC.require('r7rpg.player').revive()\n}\n\nif (IRC.require('r7rpg.player').status() === 'idle') {\n  let price = Math.ceil((player.stats.max_health - player.stats.current_health) / 3)\n  \n  if (player.stats.money < price) {\n    IRC.require('r7rpg.player').credit(Math.floor(Math.random() * 100), true)\n    throw new Error(`{dc}${from}{/} is too poor to heal lmao`)\n  }\n  \n  if (player.stats.current_health === player.stats.max_health) {\n    throw new Error(`{dc}${from}{/} is already full health`)\n  }\n  \n  IRC.require('r7rpg.player').charge(price)\n  IRC.require('r7rpg.player').healPlayer()\n} else {\n  throw new Error(`{dc}${from}{/} cannot heal (status: ${player.status.type})`)\n}"
}