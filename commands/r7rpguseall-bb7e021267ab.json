{
    "locked": false,
    "starred": false,
    "name": "r7rpg.useall",
    "command": "const { from } = IRC.message\nconst { getPlayer, savePlayer } = IRC.require('r7rpg.game')\nplayer = getPlayer(from)\n\nif (player.items.includes(input)) {\n  if (IRC.require('r7rpg.quest').inQuest()) {\n    if (IRC.require(player.quest.command).onUseItem(input)) {\n      const amount = player.items.filter(x => x === input).length\n      for (i = 0; i < (amount - 1); i++) {\n        IRC.require('r7rpg.items').useItem(input, false)\n      }\n      IRC.require('r7rpg.items').useItem(input)\n      print(`{dc}${from}{/} used {y}${input}{/} {p}${amount}{/} times`)\n    }\n  } else {\n    const amount = player.items.filter(x => x === input).length\n    for (i = 0; i < (amount - 1); i++) {\n      IRC.require('r7rpg.items').useItem(input, false)\n    }\n    IRC.require('r7rpg.items').useItem(input)\n    print(`{dc}${from}{/} used {y}${input}{/} {p}${amount}{/} times`)\n  }\n} else {\n  throw new Error(`{dc}${from}{/} doesn't have {y}${input}`)\n}"
}