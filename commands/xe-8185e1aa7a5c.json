{
    "name": "xe",
    "command": "const sp = input.split` `;\nif (sp.length < 3) {\n    print(`usage: {r}${IRC.trigger}xe AMOUNT FROM TO (eg 1 GBP EUR)`);\n}\nelse {\n    const sp_sorted = ((x) => !isNaN(x[0]) ? x : [x[1], x[0], x[2]]) (sp)\n    const amount = sp_sorted[0].trim();\n    const from = sp_sorted[1].toUpperCase().trim();\n    const to = sp_sorted[2].toUpperCase().trim();\n    \n    getJSON('http://data.fixer.io/api/latest?access_key=920bb4012de7e6878170750c6098e484')\n        .then(obj => {\n            const value = (obj.rates[to]/obj.rates[from])*amount;\n            if (value !== value) {\n                print(`usage: {r}${IRC.trigger}xe AMOUNT FROM TO (eg 1 GBP EUR)`);\n            } else {\n                print(`${value.toFixed(2)}`)\n            }\n        })\n        .catch(print.error)\n    \n    // legacy\n    // const url = `http://www.xe.com/currencyconverter/convert/?Amount=${sp[0]}&From=${sp[1]}&To=${sp[2]}`;\n    // getDOM(url)\n    //     .then(dom => {\n    //         print('xe.com changed their website so it\\'s down until I figure out how to pirate currency exchange again')\n    //         print(dom.qs('.converterresult-toAmount').textContent)\n    //     })\n    //     .catch(print.error)\n}",
    "locked": false,
    "starred": false
}